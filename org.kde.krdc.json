{
    "id": "org.kde.krdc",
    "runtime": "org.kde.Platform",
    "runtime-version": "5.15-23.08",
    "sdk": "org.kde.Sdk",
    "command": "krdc",
    "rename-icon": "krdc",
    "cleanup": [
        "/include",
        "/lib/pkgconfig",
        "/lib/*.a",
        "/lib/*.la",
        "/share/man"
    ],
    "finish-args": [
        "--share=ipc",
        "--socket=fallback-x11",
        "--socket=wayland",
        "--share=network",
        "--device=dri",
        "--socket=pulseaudio",
        "--talk-name=org.kde.kwalletd5"
    ],
    "add-extensions": {
        "org.freedesktop.Platform.ffmpeg-full": {
            "directory": "lib/ffmpeg",
            "add-ld-path": ".",
            "version": "23.08",
            "autodownload": true
        }
    },
    "cleanup-commands": [
        "mkdir -p ${FLATPAK_DEST}/lib/ffmpeg"
    ],
    "modules": [
        "shared-modules/libusb/libusb.json",
        {
            "name": "libssh",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DWITH_DEBUG_CALLTRACE:BOOL=OFF",
                "-DWITH_EXAMPLES:BOOL=OFF",
                "-DWITH_SERVER:BOOL=OFF"
            ],
            "builddir": true,
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.libssh.org/files/0.10/libssh-0.10.5.tar.xz",
                    "sha256": "b60e2ff7f367b9eee2b5634d3a63303ddfede0e6a18dfca88c44a8770e7e4234",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 1729,
                        "stable-only": true,
                        "url-template": "https://www.libssh.org/files/$major.$minor/libssh-$version.tar.xz"
                    }
                }
            ]
        },
        {
            "name": "libvncserver",
            "buildsystem": "cmake",
            "config-opts": [
                "-DWITH_EXAMPLES:BOOL=OFF",
                "-DWITH_GTK:BOOL=OFF",
                "-DWITH_SDL:BOOL=OFF",
                "-DWITH_SYSTEMD:BOOL=OFF",
                "-DWITH_TESTS:BOOL=OFF"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/LibVNC/libvncserver/archive/LibVNCServer-0.9.14.tar.gz",
                    "sha256": "83104e4f7e28b02f8bf6b010d69b626fae591f887e949816305daebae527c9a5",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 1756,
                        "stable-only": true,
                        "url-template": "https://github.com/LibVNC/libvncserver/archive/LibVNCServer-$version.tar.gz"
                    }
                }
            ]
        },
        {
            "name": "pkcs11-helper",
            "buildsystem": "autotools",
            "cleanup": [
            ],
            "config-opts": [
            ],
            "sources": [
                {
                "type": "archive",
                "url": "https://github.com/OpenSC/pkcs11-helper/archive/refs/tags/pkcs11-helper-1.29.0.tar.gz",
                "sha256": "f87c4ce596ccf6211c0de34923e2977c8892bd773ace75d1261a1908979fc9e8"
                },
            {
                    "type": "script",
                    "dest-filename": "autogen.sh",
                    "commands": [
                        "autoreconf -vfi"
                    ]
                }
            ]
        },
        {
            "name": "krb5",
            "buildsystem": "autotools",
            "subdir": "src",
            "sources": [
                {
                "type": "archive",
                "url": "https://kerberos.org/dist/krb5/1.21/krb5-1.21.1.tar.gz",
                "sha256": "7881c3aaaa1b329bd27dbc6bf2bf1c85c5d0b6c7358aff2b35d513ec2d50fa1f"
                }
            ]
        },
        {
            "name": "libfuse",
            "buildsystem": "meson",
            "config-opts": [
                "-Dexamples=false",
                "-Duseroot=false",
                "-Dtests=false",
                "-Dudevrulesdir=/tmp/",
                "-Dinitscriptdir="
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/libfuse/libfuse/releases/download/fuse-3.15.0/fuse-3.15.0.tar.xz",
                    "sha256": "70589cfd5e1cff7ccd6ac91c86c01be340b227285c5e200baa284e401eea2ca0"
                }
            ]
        },
        {
            "name": "python3-pyfuse3",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"pyfuse3\" --no-build-isolation"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/71/52/39d20e03abd0ac9159c162ec24b93fbcaa111e8400308f2465432495ca2b/async_generator-1.10-py3-none-any.whl",
                    "sha256": "01c7bf666359b4967d2cda0000cc2e4af16a0ae098cbffcb8472fb9e8ad6585b"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/fb/6e/6f83bf616d2becdf333a1640f1d463fef3150e2e926b7010cb0f81c95e88/attrs-22.2.0-py3-none-any.whl",
                    "sha256": "29e95c7f6778868dbd49170f98f8818f78f3dc5e0e37c0b1f474e3561b240836"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/e8/14/9c6a7e5f12294ccd6975a45e02899ed25468cd7c2c86f3d9725f387f9f5f/exceptiongroup-1.1.0-py3-none-any.whl",
                    "sha256": "327cbda3da756e2de031a3107b81ab7b3770a602c4d16ca618298c526f4bec1e"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/fc/34/3030de6f1370931b9dbb4dad48f6ab1015ab1d32447850b9fc94e60097be/idna-3.4-py3-none-any.whl",
                    "sha256": "90b77e79eaa3eba6de819a0c442c0b4ceefc341a7a2ab77d7562bf49f425c5c2"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/e9/4f/2f2d3f65d851852712b4de3fd0cfdcec9c5e9a9c347430e004ba770ef4db/outcome-1.2.0-py2.py3-none-any.whl",
                    "sha256": "c4ab89a56575d6d38a05aa16daeaa333109c1f96167aba8901ab18b6b5e0f7f5"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/b0/1b/a5758094d440389730304027c7229a92cd6ab2616ef928a8fe695f31dad3/pyfuse3-3.2.2.tar.gz",
                    "sha256": "aa4080913e6148bff1365d4aaacdc96767b87a1e178031fd9caeb5f0b9fc8cec"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/c3/a0/5dba8ed157b0136607c7f2151db695885606968d1fae123dc3391e0cfdbf/sniffio-1.3.0-py3-none-any.whl",
                    "sha256": "eecefdce1e5bbfb7ad2eeaabf7c1eeb404d7757c379bd1f7e5cce9d8bf425384"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/32/46/9cb0e58b2deb7f82b84065f37f3bffeb12413f947f9388e4cac22c4621ce/sortedcontainers-2.4.0-py2.py3-none-any.whl",
                    "sha256": "a163dcaede0f1c021485e957a39245190e74249897e2ae4b2aa38595db237ee0"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/f1/ed/3623a910f9bb7a31b067d6baef476ed6e294e92a245f94ab992988e4a666/trio-0.22.0-py3-none-any.whl",
                    "sha256": "f1dd0780a89bfc880c7c7994519cb53f62aacb2c25ff487001c0052bd721cdf0"
                }
            ]
        },
        {
            "name": "freerdp",
            "buildsystem": "cmake",
	    "builddir": true,
            "config-opts": [
                "-DWITH_MANPAGES:BOOL=OFF",
                "-DWITH_OSS:BOOL=OFF",
                "-DWITH_SAMPLE:BOOL=OFF",
                "-DWITH_SERVER:BOOL=OFF",
                "-DWITH_VAAPI:BOOL=ON",
                "-DWITH_AAD:BOOL=OFF",
                "-DWITH_WAYLAND:BOOL=ON",
                "-DWITH_WEBVIEW:BOOL=OFF"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/FreeRDP/FreeRDP/archive/refs/tags/3.0.0.tar.gz",
                    "sha256": "3bd040876289d835a461252fda91b7c48b9252b1c4f231f96a07b229aca8a4d9",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 10442,
                        "stable-only": true,
                        "url-template": "https://github.com/FreeRDP/FreeRDP/archive/refs/tags/$version.tar.gz"
                    }
                }
            ]
        },
        {
            "name": "krdc",
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/23.08.4/src/krdc-23.08.4.tar.xz",
                    "sha256": "985a6f6af9e2a5685dd95b629fa666211ef36eb1272fac43dc0511f33daa484d",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 8763,
                        "stable-only": true,
                        "url-template": "https://download.kde.org/stable/release-service/$version/src/krdc-$version.tar.xz"
                    }
                }
            ],
            "post-install": [
                "mkdir -p /app/share/icons/hicolor/scalable/apps/",
                "install -D /usr/share/icons/breeze/apps/48/krdc.svg /app/share/icons/hicolor/scalable/apps/"
            ]
        }
    ]
}
